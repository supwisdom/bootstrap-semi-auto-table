+function(a){"use strict";function b(b){var c,d=arguments;return this.each(function(){var e=a(this),f=e.data("semiAutoTable");if(!f){var g=a.extend(!0,{},a.fn.semiAutoTable.defaults,"object"==typeof b&&b);e.data("semiAutoTable",f=new l(this,g))}if("string"==typeof b)if(1==d.length){var h=f[b].call(f);"undefined"!=typeof h&&(c=h)}else{var h=f[b].apply(f,Array.prototype.slice.call(d,1));"undefined"!=typeof h&&(c=h)}}),"undefined"!=typeof c?c:this}var c=function(b,c){return 1===arguments.length?b:(arguments.length>2&&c.constructor!==Array&&(c=a.makeArray(arguments).slice(1)),c.constructor!==Array&&(c=[c]),a.each(c,function(a,c){b=b.replace(new RegExp("\\{"+a+"\\}","g"),function(){return c})}),b)},d=function(b){var c=[];return a.each(_.keys(b),function(){c.push(parseInt(this))}),c},e=function(b,c){var d=a(b.table().header()),e=a(b.table().body());if(a.each(d.find("th:visible"),function(){var b=parseInt(a(this).attr("data-column-index")),c=e.find("tr:first").find("td:eq("+b+")");return c.attr("colspan")>0?!0:void a(this).outerWidth(e.find("tr:first").find("td:eq("+b+")").outerWidth())}),c)d.parent("table").width(c);else{var f=e.parent("table")[0].style.width;d.parent("table").css("width",f),d.parent("table").css("max-width",f)}},f=window.localStorage,g="-table",h=!0,i=a(".semi-auto-table-toolbar").outerHeight(),j=a(".dataTables_scrollHead").outerHeight(),k=null,l=function(b,c){this.options=c,this.$table=a(b),this.$table.css("max-width",this.$table[0].style.width),this.itemKey=this.options.saveStatus.key+g,this.initTable=!0,this.initLayout(),this.options.useDataTable?(this.initMenuItems(),this.addDataTablePlugin()):(this.initRowButton(),this.initMenuItems(),this.initPaginator(),this.initSortBy(),this.selectedRowCount())};l.VERSION="0.0.1",l.prototype.getSavedStatus=function(){return f.getItem(this.itemKey)?JSON.parse(f.getItem(this.itemKey)):{}},l.prototype.addDataTablePlugin=function(){var b=this,c=!1;b.options.data&&b.options.data.length>0&&(c=b.options.data);var d;b.options.colOrderArrangable&&(d={reorderCallback:function(){return h?void b.renderResizableTable():!1}}),b.$table.DataTable(b.options.fixedHeader.enabled?{retrieve:!0,data:c,columns:b.options.columns,ajax:b.options.ajax,colReorder:d,searching:!1,paging:!1,ordering:!1,info:!1,autoWidth:!1,dom:"Zlfrtip",scrollY:(b.options.fixedHeader.scrollY||0)+"px",scrollX:b.$table.width()+"px",scrollCollapse:!0,fnDrawCallback:b.fnDrawCallback(),initComplete:b.initComplete(),language:{emptyTable:a.fn.semiAutoTable.locales[b.options.locale].data_table.emptyTable,loadingRecords:a.fn.semiAutoTable.locales[b.options.locale].data_table.loadingRecords}}:{retrieve:!0,data:c,columns:b.options.columns,ajax:b.options.ajax,colReorder:d,searching:!1,paging:!1,ordering:!1,info:!1,autoWidth:!1,dom:"Zlfrtip",fnDrawCallback:b.fnDrawCallback(),initComplete:b.initComplete(),language:{emptyTable:a.fn.semiAutoTable.locales[b.options.locale].data_table.emptyTable,loadingRecords:a.fn.semiAutoTable.locales[b.options.locale].data_table.loadingRecords}})},l.prototype.fnDrawCallback=function(){var b=this;return function(c){var d=a(c.nTable).DataTable(),e=d.ajax.json(),f=d.settings()[0].iDraw<=1;if(!f){if(b.bindRowClick(),b.selectedRowCount(),b.$selectColumn){var g=[];if(b.options.saveStatus.enabled)g=b.getSavedStatus().order;else{var h=b.$table.DataTable();g=h.columns().indexes()}b.updateColumnSelect({},g)}b.options.fixedHeader.enabled&&k&&b.renderResizableTable()}b.options.reDrawCallback(e,f)}},l.prototype.initComplete=function(){var b=this;return function(c,d){if(d&&d.data&&(b.options.pageOption.totalRows=d.data.length,b.options.pageOption.totalPages=Math.ceil(d.data.length/b.options.rowsPerPage)),b.renderColumnSelect(),b.initRowButton(),b.initPaginator(),b.initSortBy(),b.selectedRowCount(),b.options.fixedHeader.enabled){var f=b.$table.DataTable();c.fnRecordsTotal()>0&&e(f),a(f.table().header()).parent("table").css("height",""),b.$table.on("change-scrollY",function(a,c,d){b.changeTableScrollY(c,{enabled:d})}),b.$table.trigger("change-scrollY",[a(c.nScrollBody),b.options.fixedHeader.enabled]),h=!0,a(window).resize(_.throttle(function(){var b=a(f.table().header()),c=a(f.table().body()).parent("table").find("thead");a.each(b.find("th"),function(){var b=parseInt(a(this).attr("data-column-index"));c.find("th:eq("+b+")").css("width",this.style.width)});var d=b.parent("table")[0].style.width;c.parent("table").css("width",d),c.parent("table").css("max-width",d)},300))}b.options.completeTableCallback(d)}},l.prototype.changeTableScrollY=function(b,c){if(this.options.fixedHeader=a.extend({},this.options.fixedHeader,c),!this.options.fixedHeader.enabled)return!1;if(i&&i==a(".semi-auto-table-toolbar").outerHeight()&&j&&j==a(".dataTables_scrollHead").outerHeight())return!1;j=a(".dataTables_scrollHead").outerHeight(),i=a(".semi-auto-table-toolbar").outerHeight();var d=this.options.fixedHeader.scrollY?this.options.fixedHeader.scrollY-i-j:0;b.css("max-height",d+"px"),b.height(d)},l.prototype.renderColumnSelect=function(){var b=this.$table.DataTable(),c=this;if(this.options.colOrderArrangable){this.$table.find("th").css("cursor","pointer");var d=[];d=c.options.saveStatus.enabled?c.getSavedStatus().order:b.columns().indexes(),d&&d.length>0&&(h=!1),b.colReorder.order(d,!0)}this.initColumnSelect(d?d:null),this.options.colResizable&&(this.$table.addClass("col-resizable"),k=this.$table.colResizable({liveDrag:!0,postbackSafe:{enabled:c.options.saveStatus.enabled,key:c.options.saveStatus.key+g},gripInnerHtml:"<div class='grip'></div>",draggingClass:"dragging",partialRefresh:!1,resizeMode:"overflow",onDrag:c.freshHeaderWidth()})),b.on("column-reorder",function(a,d,e){var g=b.colReorder.order();if(c.reOrderColumnSelect(g,e),c.options.saveStatus.enabled){var h=c.getSavedStatus();h.order=g,f.setItem(c.itemKey,JSON.stringify(h))}c.bindRowClick()});var i={};a.each(this.options.columnOption.hideColumns,function(){i[this]=c.getSavedStatus()["hidden-columns"][this]?c.getSavedStatus()["hidden-columns"][this]:125}),this.$table.on("showOrHideCol",function(d,g,h,j,k,l){if(h)return!1;if(c.options.saveStatus.enabled){var m=c.getSavedStatus()["hidden-columns"];for(var n in m)-1==_.keys(i).indexOf(n)&&(i[n]=m[n])}var o=a(g.currentTarget).find(":checkbox").prop("checked");a(g.target).is(":checkbox")||(o=!o,a(g.currentTarget).find(":checkbox").prop("checked",o).trigger("change"));var p=c.$table.find("tr th:eq("+k.index()+")"),q=k.index();if(c.options.colOrderArrangable){p=c.$table.find("tr th[data-column-index="+parseInt(k.attr("data-column-index"))+"]");var r=a(this).DataTable().colReorder.order();q=r[parseInt(k.attr("data-column-index"))]}if(p.length||(k=a(c.$table.DataTable().table().header()).find("th:eq("+j+")"),l.length||(l=c.$table.find("tbody>tr").find("td:eq("+j+")"))),o){if(m&&i[q]){var s=i[q];p.css("width",s+"px"),p.outerWidth(s)}p.show(),l.show(),k.show(),delete i[q]}else{var t=0;a.each(k.parent("tr").find("th:visible"),function(){t+=a(this).outerWidth()}),p.hide(),l.hide(),k.hide(),i[q]=k.outerWidth(),c.$table.width(t-k.outerWidth())}if(c.options.saveStatus.enabled){var u=c.getSavedStatus();u["hidden-columns"]=i,f.setItem(c.itemKey,JSON.stringify(u))}c.options.fixedHeader.enabled&&e(b,t-k.outerWidth()),c.renderResizableTable()})},l.prototype.freshHeaderWidth=function(){if(!this.options.fixedHeader.enabled)return!1;var b=this;return function(){var c=b.$table.DataTable();e(c),b.$table.trigger("change-scrollY",[a(".dataTables_scrollBody"),b.options.fixedHeader.enabled])}},l.prototype.renderResizableTable=function(){var a=this;this.$table.colResizable({disable:!0}),this.$table.colResizable({liveDrag:!0,postbackSafe:{enabled:a.options.saveStatus.enabled,key:a.options.saveStatus.key+g,refreshStorage:!0},gripInnerHtml:"<div class='grip'></div>",draggingClass:"dragging",partialRefresh:!0,resizeMode:"overflow",onDrag:a.freshHeaderWidth()})},l.prototype.getTableJson=function(){return this.$table.DataTable().ajax.json()},l.prototype.initLayout=function(){var b=a("<div></div>");b.addClass(this.options.containerClass),this.$container=b,this.$table.after(b),this.$table.appendTo(b);var c=a('<div class="'+this.options.toolbarClass+'"></div>');c.appendTo(b);var d=a('<div class="'+this.options.menuBarWrapperClass+'"></div>');d.appendTo(c);var e=a('<div class="'+this.options.menuBarClass+'" role="toolbar"></div>');e.appendTo(d),this.$menuBar=e;var f=a('<div class="'+this.options.paginatorWrapperClass+'"></div>');f.appendTo(c);var g=a('<div class="'+this.options.paginatorClass+'" role="toolbar"></div>');g.appendTo(f),this.$paginator=g;var h=a('<div class="'+this.options.tableWrapperClass+'" >');!this.options.fixedHeader.enabled&&this.options.overflow&&h.addClass("table-responsive"),h.appendTo(b),this.$table.appendTo(h),this.$table.addClass(this.options.tableClass)},l.prototype.initRowButton=function(){this.updateRowButton(this.options.rowOption)},l.prototype.updateRowButton=function(b){if(this.$rowIdInputList&&(this.$rowIdInputList.off("click"),delete this.$rowIdInputList),this.$selectAll&&(this.$selectAll.remove(),delete this.$selectAll),this.$rows&&this.$rows.off("click"),b){this.options.rowOption=a.extend({},this.options.rowOption,b);{var c=this,d=this.options.rowOption,e=this.options.selectColor,f=d.type,g=d.showSelectAll;d.inputName}if("checkbox"==f){if(g){var h=!1;this.$selectAll=this.addMenuItem({title:a.fn.semiAutoTable.locales[this.options.locale].select_all,callback:function(){a.each(c.$rowIdInputList.not(":hidden"),function(){a(this).prop("checked")==h?(a(this).prop("checked",!h).trigger("change"),a(this).is(":checked")?a(this).closest("tr").addClass(e):a(this).closest("tr").removeClass(e)):a(this).prop("checked",!h)}),c.selectedRowCount(),h=!h},dropdowns:[{title:a.fn.semiAutoTable.locales[this.options.locale].select_inverse,callback:function(){a.each(c.$rowIdInputList,function(b,c){var d=a(c);d.prop("checked",!d.prop("checked")).trigger("change"),d.is(":checked")?d.closest("tr").addClass(e):d.closest("tr").removeClass(e)}),c.selectedRowCount(),h=!1}}]}),this.$selectAll.addClass("select-all-btn"),this.$selectAll.prependTo(this.$menuBar)}this.bindRowClick(this.options.rowOption)}else{if("radio"!=f)throw"Unrecgonized rowOption.type";this.bindRowClick(this.options.rowOption)}}},l.prototype.bindRowClick=function(b){this.options.rowOption=a.extend({},this.options.rowOption,b);var c=this.options.rowOption,d=c.rowSelector;this.$rows=this.$table.find(d),this.bindRowsAndAddRowClick(b,this.$rows)},l.prototype.initColumnSelect=function(a){this.updateColumnSelect(this.options.columnOption,a)},l.prototype.updateColumnSelect=function(b,c){this.$selectColumn&&(this.$selectColumn.remove(),delete this.$selectColumn),this.options.columnOption=a.extend({},this.options.columnOption,b);var e=this,f=this.options.columnOption,g=f.showColumnSelect,h=f.stickyColumns,i=f.hideColumns;if(this.options.saveStatus.enabled){var j=this.getSavedStatus();i=j["hidden-columns"]?d(j["hidden-columns"]):[]}var k=[],l=this.$table.find("thead>tr>th"),m=this.$table.find("tr");g&&(l.each(function(b,d){var f=m.find("th:eq("+b+")"),g=m.find("td:eq("+b+")"),l=a(e.$table.DataTable().table().header()).find("th:eq("+b+")"),n=e.$table,o=!0,p=!1,q=j&&j.order?j.order[b]:b;if(-1!=i.indexOf(q)&&(o=!1,f.hide(),g.hide(),l.hide()),-1!=h.indexOf(b)&&(p=!0),a(d).text()&&0!=a(d).text().length){var r='<label class="checkbox-inline columns-title"><input type="checkbox" value="'+(c?c[b]:b);o&&(r+='" checked="'+o),p&&(r+='" disabled="'+p),r+='"/>'+a(d).text()+"</label>",k.push({title:r,callback:function(a){n.trigger("showOrHideCol",[a,p,c?c[b]:b,l,g])}})}}),this.$selectColumn=this.addMenuItem({icon:"fa fa-th",dropdowns:k,keepOpen:!0}),this.$menuBar.find(".select-all-btn").length>0?this.$menuBar.find(".select-all-btn").after(this.$selectColumn):this.$selectColumn.prependTo(this.$menuBar))},l.prototype.reOrderColumnSelect=function(b,c){c.from<c.to?a(".columns-title input[value="+b[c.to-1]+"]").parents("li").after(a(".columns-title input[value="+b[c.to]+"]").parents("li")):a(".columns-title input[value="+b[c.to+1]+"]").parents("li").before(a(".columns-title input[value="+b[c.to]+"]").parents("li"))},l.prototype.initMenuItems=function(){this.updateMenuItems(this.options.menus)},l.prototype.updateMenuItems=function(b){this.$selectAll||this.$selectColumn||(this.$menuBar.find('[data-toggle="dropdown"]').tooltip("destroy"),this.$menuBar.find('[data-toggle="tooltip"]').tooltip("destroy"),this.$menuBar.children().remove()),this.$selectAll&&!this.$selectColumn&&(this.$menuBar.children().not(this.$selectAll).find('[data-toggle="dropdown"]').tooltip("destroy"),this.$menuBar.children().not(this.$selectAll).find('[data-toggle="tooltip"]').tooltip("destroy"),this.$menuBar.children().not(this.$selectAll).remove()),!this.$selectAll&&this.$selectColumn&&(this.$menuBar.children().not(this.$selectColumn).find('[data-toggle="dropdown"]').tooltip("destroy"),this.$menuBar.children().not(this.$selectColumn).find('[data-toggle="tooltip"]').tooltip("destroy"),this.$menuBar.children().not(this.$selectColumn).remove()),this.$selectAll&&this.$selectColumn&&(this.$menuBar.children().not(this.$selectAll).not(this.$selectColumn).find('[data-toggle="dropdown"]').tooltip("destroy"),this.$menuBar.children().not(this.$selectAll).not(this.$selectColumn).find('[data-toggle="tooltip"]').tooltip("destroy"),this.$menuBar.children().not(this.$selectAll).not(this.$selectColumn).remove()),this.options.menus=b;var c=this.options.menus,d=this;a.each(c,function(a,b){d.addMenuItem(b)}),this.renderButtonTag(c),this.$menuBar.find('[data-toggle="tooltip"]').tooltip({container:"body"})},l.prototype.renderButtonTag=function(b){var c=this;a.each(b,function(b,d){var e;e=d instanceof Array?d:[d],a.each(e,function(a,b){if(b.tag&&b.tag.trim()&&b.id){var d=c.$menuBar.find("[data-id="+b.id+"]");d.append('<div class="btn-group-tag" data-tag="'+b.tag+'">'+b.tag.substring(0,2)+"</div>")}})})},l.prototype.addMenuItem=function(a){return this._addMenuItem(this.$menuBar,a)},l.prototype._addMenuItem=function(b,c){var d=this,e=this.appendButtonGroup(b);return a.isArray(c)?a.each(c,function(a,b){b.dropdowns&&0==b.dropdowns.length||d.appendButtonItem(e,b)}):this.appendButtonItem(e,c),e},l.prototype.appendButtonGroup=function(b){var c=a('<div class="btn-group" role="group"></div>');return c.addClass(this.options.btnGroupSize),c.appendTo(b),c},l.prototype.appendButtonItem=function(b,c){var d=this,e=c.id,f=c.title,g=c.btnClass,h=c.callback,i=c.icon,j=c.dropdowns,k=c.tooltip,l=c.keepOpen,m={id:e,title:f,icon:i,callback:h,btnClass:g,tooltip:k};if(j&&0!=j.length){b=this.appendButtonGroup(b);var n;h?(this.appendButton(b,m),n=this.appendDropdown(b,{btnClass:g,keepOpen:l},j.length)):(m=a.extend({},m,{keepOpen:l}),n=this.appendDropdown(b,m,j.length)),a.each(j,function(b,c){if("string"==typeof c){if("divider"!=c)throw"Unrecgonized menu item: "+c;d.appendDropdownDivider(n)}else if(f&&-1==f.indexOf('<input type="checkbox"'))d.appendDropdownItemByDropdown(n,c,j.length);else if(j.length<=9)d.appendDropdownItemByDropdown(n,c,j.length);else if(b%3==0){var e=a("<tr></tr>");n.find("tbody").append(e),d.appendDropdownItemByDropdown(e,c,j.length)}else d.appendDropdownItemByDropdown(n.find("tr").eq(-1),c,j.length)})}else this.appendButton(b,m)},l.prototype.appendDropdownItemByDropdown=function(a,b,c){var d=this;d.appendDropdownItem(a,{title:b.title,callback:b.callback,icon:b.icon},c)},l.prototype.appendButton=function(b,c){var d=c.id,e=c.title,f=c.callback,g=c.icon,h=c.btnClass||this.options.btnClass,i=c.tooltip,j=a('<button type="button" data-id='+d+"></button>");return j.addClass("btn"),j.addClass(h),i&&0!=i.length&&(j.attr("data-toggle","tooltip"),j.attr("title",i)),e&&0!=e.length&&j.text(e),g&&0!=g.length&&j.prepend('<i class="'+g+' title-icon"></i>'),j.appendTo(b),f?j.on("click",function(b){a(b.target).is(":checkbox")||a(b.target).is(":radio")||b.preventDefault(),f(b)}):j.on("click",function(b){a(b.target).is(":checkbox")||a(b.target).is(":radio")||b.preventDefault()}),j},l.prototype.appendDropdown=function(b,c,d){var e=c.title,f=c.btnClass||this.options.btnClass,g=c.icon,h=c.tooltip,i=c.keepOpen||!1,j=a('<button type="button" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false"></button>');j.addClass("btn"),j.addClass(f),h&&0!=h.length&&(j.attr("title",h),j.tooltip({container:"body"})),e&&0!=e.length&&j.text(e),g&&0!=g.length&&j.prepend('<i class="'+g+' title-icon"></i>'),j.appendTo(b);var k=a('<i class="fa fa-caret-down"></i>');k.appendTo(j);var l;return l=a(e&&0!=e.length?'<ul class="dropdown-menu" role="menu"></ul>':9>=d?'<ul class="dropdown-menu" role="menu"></ul>':'<table class="dropdown-menu" role="menu"><tbody></tbody></table>'),l.appendTo(b),i&&l.on("click",function(a){a.stopPropagation()}),l},l.prototype.appendDropdownItem=function(b,c,d){var e,f=c.title,g=c.callback,h=c.icon;e=a(f&&-1==f.indexOf('<input type="checkbox"')?"<li></li>":9>=d?"<li></li>":"<td></td>"),e.appendTo(b);var i=a('<a href="#"></a>');f&&0!=f.length&&i.html(f),h&&0!=h.length&&i.prepend('<i class="'+h+' title-icon"></i>'),g?i.on("click",function(b){a(b.target).is(":checkbox")||a(b.target).is(":radio")||b.preventDefault(),g(b)}):i.on("click",function(b){a(b.target).is(":checkbox")||a(b.target).is(":radio")||b.preventDefault()}),i.appendTo(e)},l.prototype.appendDropdownDivider=function(b){var c=a('<li class="divider"></li>');c.appendTo(b)},l.prototype.initSortBy=function(){this.updateSortBy(this.options.sortOption)},l.prototype.updateSortBy=function(b){this.sortObject&&delete this.sortObject,this.$sortItems&&(this.$sortItems.children("i").remove(),this.$sortItems.off("click"),delete this.$sortItems);var c=this;this.options.sortOption=b;var d=a.extend({},b);this.sortObject=d,this.$sortItems=this.options.fixedHeader.enabled?a("[data-sort-by]"):this.$table.find("[data-sort-by]"),this.$sortItems.addClass("semi-auto-table-sorter"),this.$sortItems.each(function(b,d){var e=a(d);e.tooltip({title:function(){var b=a(this);return"asc"==b.data("sort")?a.fn.semiAutoTable.locales[c.options.locale].sort_asc:"desc"==b.data("sort")?a.fn.semiAutoTable.locales[c.options.locale].sort_desc:a.fn.semiAutoTable.locales[c.options.locale].sort_none},container:"body"})}),this.$sortItems.each(function(b,d){var e=a(d);e.on("click",function(a){a.preventDefault(),e.tooltip("hide");var b=e.data("sort-by"),d=e.data("sort"),f={};"none"==d?f[b]="asc":"asc"==d?f[b]="desc":"desc"==d&&(f[b]="none"),c.triggerSortChangeEvent(f)})}),this.$sortItems.each(function(b,c){var e=a(c),f=e.data("sort-by"),g=d[f]?d[f]:"none";e.data("sort",g),e.append("asc"==g?"<i class='fa fa-sort-asc' />":"desc"==g?"<i class='fa fa-sort-desc' />":"<i class='fa fa-sort' />")})},l.prototype.getSortObject=function(){return a.extend({},this.sortObject)},l.prototype.initPaginator=function(){this.updatePaginator(this.options.pageOption)},l.prototype.updatePaginator=function(b){if(this.pageObject&&delete this.pageObject,!b)return void this.$paginator.empty();this.options.pageOption=a.extend({},a.fn.semiAutoTable.defaults.pageOption,b);var c=this.options.pageOption;if(null==c.currentPage)throw"pageOption.currentPage is null";if(null==c.totalPages)throw"pageOption.totalPages is null";if(null==c.totalRows)throw"pageOption.totalRows is null";if(!c.rowsPerPageOptions||0==c.rowsPerPageOptions.length)throw"pageOption.rowsPerPageOptions is null or empty";c._rowsPerPageOptions=c.rowsPerPageOptions.split(","),c.rowsPerPage=c.rowsPerPage||c._rowsPerPageOptions[0],this.pageObject={currentPage:c.currentPage,totalPages:c.totalPages,totalRows:c.totalRows,rowsPerPage:c.rowsPerPage||c._rowsPerPageOptions[0]},this.initPageInfo(c),this.initPages(c),this.initPageJumper(c),this.initConfig(c)},l.prototype.initPageInfo=function(b){if(this.$pageInfo&&(this.$pageInfo.find('[data-toggle="tooltip"]').tooltip("destroy"),this.$pageInfo.off("click"),this.$pageInfo.remove(),delete this.$pageInfo),0!=b.totalRows){var d=this,e=b.currentPage,f=b.rowsPerPage,g=b.totalRows,h=(e-1)*f+1,i=h+f-1>g?g:h+f-1,j=this.options.pageTooltip;this.$pageInfo=this._addMenuItem(this.$paginator,{title:h+"-"+i+" of "+g,tooltip:j?c(a.fn.semiAutoTable.locales[this.options.locale].current_page,e):"",callback:function(){d.$pageInfo.hide(),d.$pages.hide(),d.$pageSize.selectpicker("show"),d.$pageJumper.show(),d.$pageGo.show()}}),this.$pageInfo.find('[data-toggle="tooltip"]').tooltip({container:"body"})}},l.prototype.initPageSize=function(b){if(this.$pageSize&&(this.$pageSize.selectpicker("destroy"),this.$pageSize.off("change"),this.$pageSize.remove(),delete this.$pageSize),0!=b.totalRows){var d=this,e=b.rowsPerPage,f=b._rowsPerPageOptions,g=a("<select></select>");this.$pageSize=g,g.addClass("rows-per-page"),g.addClass(this.options.btnGroupSize),a.each(f,function(b,f){var h=a("<option></option>");h.attr("value",f),h.text(c(a.fn.semiAutoTable.locales[d.options.locale].page_size,f)),h.appendTo(g),f==e&&h.prop("selected","selected")}),g.on("change",function(){var b=a(this).val(),c=parseInt(b,10),e=Math.ceil(d.pageObject.totalRows/c),f=d.pageObject.currentPage>e?e:d.pageObject.currentPage;d.pageObject.rowsPerPage=c,d.pageObject.totalPages=e,d.pageObject.currentPage=f,d.$table.triggerHandler("pageSizeChange")}),g.appendTo(this.$paginator),g.selectpicker(),g.selectpicker("hide")}},l.prototype.initPages=function(b){if(this.$pages&&(this.$pages.find('[data-toggle="tooltip"]').tooltip("destroy"),this.$pages.off("click"),this.$pages.remove(),delete this.$pages),0!=b.totalRows){var d=this,e=b.currentPage,f=b.totalPages,g=this.options.pageTooltip,h=[];1!=e&&(h.push({icon:"fa fa-angle-double-left",tooltip:g?a.fn.semiAutoTable.locales[this.options.locale].first_page:"",callback:function(){d.triggerPageChangeEvent({currentPage:1})}}),h.push({icon:"fa fa-angle-left",tooltip:g?c(a.fn.semiAutoTable.locales[this.options.locale].prev_page,e-1):"",callback:function(){d.triggerPageChangeEvent({currentPage:d.pageObject.currentPage-1})}})),e!=f&&(h.push({icon:"fa fa-angle-right",tooltip:g?c(a.fn.semiAutoTable.locales[this.options.locale].next_page,e+1):"",callback:function(){d.triggerPageChangeEvent({currentPage:d.pageObject.currentPage+1})}}),h.push({icon:"fa fa-angle-double-right",tooltip:g?a.fn.semiAutoTable.locales[this.options.locale].last_page:"",callback:function(){d.triggerPageChangeEvent({currentPage:f})}})),this.$pages=this._addMenuItem(this.$paginator,h),this.$pages.find('[data-toggle="tooltip"]').tooltip({container:"body"})}},l.prototype.initPageJumper=function(b){if(this.$pageJumper&&(this.$pageJumper.remove(),delete this.$pageJumper),this.$pageGo&&(this.$pageGo.remove(),delete this.$pageGo),0!=b.totalRows){var c=this,d=b.currentPage,e=b.totalPages,f=this.appendButtonGroup(this.$paginator);f.addClass("page-jump");var g=a('<input type="text" value="'+d+'"/>');g.appendTo(f),f.append("<span> / "+e+"</span>"),g.data("prevVal",d),g.keydown(function(b){if(13==b.keyCode){var d=a(this).val();b.preventDefault(),b.stopImmediatePropagation(),c.triggerPageChangeEvent({currentPage:parseInt(d,10)})}}).keyup(function(){var b=a(this),d=b.data("prevVal")||"",e=b.val();if(""!=e){if(!/^[0-9]*[1-9][0-9]*$/.test(e))return void b.val(d);var f=parseInt(e,10);if(f>c.getPageObject().totalPages)return void b.val(d);b.data("prevVal",f),c.pageObject.currentPage=parseInt(e,10)}}),this.$table.off("pageSizeChange"),this.$table.on("pageSizeChange",function(){g.val(c.pageObject.currentPage),g.data("prevVal",c.pageObject.currentPage),f.children("span").text(" / "+c.pageObject.totalPages)}),f.hide();var h=this._addMenuItem(this.$paginator,{title:"Go",callback:function(){c.triggerPageChangeEvent({})}});h.hide(),this.$pageGo=h,this.$pageJumper=f}},l.prototype.initConfig=function(b){this.$config&&(this.$config.off("click"),this.$config.remove(),delete this.$config);var c=this,d=[{name:"rowsPerPage",title:"每页显示行数",init:function(){var d=this;this.$pageSize&&(this.$pageSize.selectpicker("destroy"),this.$pageSize.off("change"),this.$pageSize.remove(),delete this.$pageSize);var e=Array.prototype.slice.call(arguments)[0];this.$pageSize=e;var f=b._rowsPerPageOptions;a.each(f,function(b,c){var f=a("<a class='btn btn-default' role='button'></a>");f.text(c),d.pageObject.rowsPerPage==c&&f.addClass("active"),f.attr("value",c),e.find(".btn-group").append(f)}),e.on("click",function(b){if("A"===b.target.nodeName){var e=a(b.target),f=e.attr("value"),g=parseInt(f,10),h=Math.ceil(c.pageObject.totalRows/g),i=c.pageObject.currentPage>h?h:c.pageObject.currentPage;d.pageObject.rowsPerPage=g,d.pageObject.totalPages=h,d.pageObject.currentPage=i,c.triggerPageChangeEvent({})}})}},{name:"displayMode",title:"显示模式",init:function(){var b=this,c=Array.prototype.slice.call(arguments)[0],d={dml:"宽松",dmm:"适中",dms:"紧凑"};a.each(Object.keys(d),function(e,g){var h=a("<a class='btn btn-default' role='button' ></a>");h.attr("value",g).text(d[g]),f.getItem("_page_displayMode")==g&&(h.addClass("active"),b.$table.addClass(g)),h.appendTo(c.find(".btn-group"))}),c.on("click",function(c){if("A"===c.target.nodeName){var d=a(c.target),e=d.attr("value");b.$table.removeClass(b.pageObject.displayMode).addClass(e),d.siblings().removeClass("active"),d.addClass("active"),b.pageObject.displayMode=e,f.setItem("_page_displayMode",e)}})}}],e=a('<div class="dropdown">  <button class="btn btn-default dropdown-toggle" type="button"  data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">   <i class="fa fa-cog"></i>  </button>  <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">  </ul></div>');this.$config=e,e.addClass("page-config"),e.addClass(this.options.btnGroupSize),a.each(d,function(b,d){var f=a("<li><span>"+d.title+"</span><div class='btn-group btn-group-justified' role='group'></div></li>");d.init.apply(c,[f]),f.appendTo(e.find("ul.dropdown-menu"))}),this.$config.appendTo(this.$paginator)},l.prototype.getPageObject=function(){return a.extend({},this.pageObject)},l.prototype.getSelectedRows=function(){var b=[];return this.$rowIdInputList?(a.each(this.$rowIdInputList,function(c,d){a(d).prop("checked")&&b.push(d.value)}),b):b},l.prototype.selectedRowCount=function(){this.options.selectedNum&&0==this.$paginator.find(".selected-items-num").length&&this.$paginator.prepend('<div class="pull-left text-primary selected-items">已选<span class="selected-items-num">0</span>条</div>'),this.$paginator.find(".selected-items-num").text(this.getSelectedRows().length)},l.prototype.triggerPageChangeEvent=function(b){this.$table.triggerHandler("pageChange",a.extend({},this.pageObject,b))},l.prototype.triggerSortChangeEvent=function(a){this.$table.triggerHandler("sortChange",a)},l.prototype.get=function(){return this},l.prototype.destroy=function(){this.$sortItems&&(this.$sortItems.off("click"),this.$sortItems.find("i.fa").remove(),this.$sortItems.removeClass("semi-auto-table-sorter")),this.$table.unbind("pageChange"),this.$table.unbind("sortChange"),this.$table.removeClass(this.options.tableClass),this.$table.removeData("semiAutoTable"),this.$container.after(this.$table),this.$container.remove()},l.prototype.addRow=function(b){if(this.options.useDataTable){var c=this.$table.DataTable();c.row.add(b).draw()}else{for(var d=this.$table.find("tbody tr").eq(0).find("td").length,e=a('<tr role="row"></tr>'),f=0;d>f;f++)e.append("<td>"+b[f]+"</td>");this.$table.find("tbody").append(e);var g=this.$table.find("tr:last");this.bindRowsAndAddRowClick(this.options.rowOption,g)}},l.prototype.bindRowsAndAddRowClick=function(b,c){this.options.rowOption=a.extend({},this.options.rowOption,b);var d=this,e=this.options.rowOption,f=this.options.selectColor,g=e.type,h=e.inputName;this.$rows=c,"checkbox"==g?(this.$rowIdInputList=this.$table.find(':checkbox[name="'+h+'"]'),this.$rows.unbind("click").on("click",function(b){if(a(this).find(':checkbox[name="'+h+'"]').is(":checked")?a(this).addClass(f):a(this).removeClass(f),a(b.target).is(":checkbox"))return void d.selectedRowCount();var c=a(b.currentTarget),e=c.find(':checkbox[name="'+h+'"]');0!=e.length&&(a(b.target).is("label")&&a(b.target).attr("for")==e.attr("id")||(e.is(":checked")?a(this).removeClass(f):a(this).addClass(f),e.prop("checked",!e.prop("checked")).trigger("change"),d.selectedRowCount()))})):"radio"==g&&(this.$rowIdInputList=this.$table.find(':radio[name="'+h+'"]'),this.$rows.unbind("click").on("click",function(b){if(a(this).find(':radio[name="'+h+'"]').is(":checked")?a(this).addClass(f).siblings().removeClass("selectColor"):a(this).removeClass(f),a(b.target).is(":radio"))return void d.selectedRowCount();var c=a(b.currentTarget),e=c.find(':radio[name="'+h+'"]');if(0!=e.length){if(a(b.target).is("label")&&a(b.target).attr("for")==e.attr("id"))return void a.each(d.$rowIdInputList,function(b,c){var d=a(c);d.prop("checked",!1).trigger("change")});e.is(":checked")?a(this).removeClass(f):a(this).addClass(f).siblings().removeClass("selectColor");var g=!e.prop("checked");a.each(d.$rowIdInputList,function(b,c){var d=a(c);d.prop("checked",!1).trigger("change")}),e.prop("checked",g).trigger("change"),d.selectedRowCount()}}))};var m=a.fn.semiAutoTable;a.fn.semiAutoTable=b,a.fn.semiAutoTable.Constructor=l,a.fn.semiAutoTable.defaults={locale:"zh-CN",containerClass:"",btnGroupSize:"btn-group-sm",btnClass:"btn-default",toolbarClass:"row semi-auto-table-toolbar",menuBarWrapperClass:"col-sm-12 col-md-8 semi-auto-table-menubar",menuBarClass:"btn-toolbar",paginatorWrapperClass:"col-sm-12 col-md-4 semi-auto-table-paginator",paginatorClass:"btn-toolbar pull-right",tableWrapperClass:"semi-auto-table-data",tableClass:"table table-striped table-condensed table-hover",rowOption:{showSelectAll:!0,type:"checkbox",inputName:"row.id",rowSelector:"> tbody > tr"},columnOption:{showColumnSelect:!1,stickyColumns:[],hideColumns:[]},menus:[],sortOption:{},pageOption:{rowsPerPageOptions:"20,50,100,200,500,1000",currentPage:null,rowsPerPage:null,totalPages:null,totalRows:null},selectedNum:!0,pageTooltip:!1,selectColor:"info",useDataTable:!0,colResizable:!1,colOrderArrangable:!1,saveStatus:{enabled:!1,key:""},data:[],columns:null,ajax:null,completeTableCallback:function(){},reDrawCallback:function(){},fixedHeader:{enabled:!1,scrollY:0},overflow:!0},a.fn.semiAutoTable.locales={},a.fn.semiAutoTable.noConflict=function(){return a.fn.semiAutoTable=m,this}}(jQuery),+function(a){a.fn.semiAutoTable.locales["en-US"]={select_all:"All",select_inverse:"Inverse select",next_page:"Next page {0}",prev_page:"Prev page {0}",first_page:"First page",last_page:"Last page",current_page:"Current page {0}",page_size:"{0} rows per page",sort_asc:"Ascending",sort_desc:"Descending",sort_none:"Unsorted",data_table:{emptyTable:"No data available in table",loadingRecords:"Loading..."}}}(jQuery),+function(a){a.fn.semiAutoTable.locales["zh-CN"]={select_all:"全选",select_inverse:"反选",next_page:"下页第 {0} 页",prev_page:"上页第 {0} 页",first_page:"第一页",last_page:"最后一页",current_page:"当前第 {0} 页",page_size:"每页 {0} 条",sort_asc:"升序排列",sort_desc:"降序排列",sort_none:"未排序",data_table:{emptyTable:"无数据",loadingRecords:"正在加载..."}}}(jQuery);